<script type="application/ld+json">
[{
	"@context": "http://schema.org",
	"@type": "Organization",	
	"name" : {{ .Site.Params.name -}},
	"email" : {{ .Site.Params.contact -}},
	"url" : {{ delimit (slice .Site.Params.domain.protocol .Site.Params.domain.name) "" -}},
	"logo" : {{ delimit (slice .Site.BaseURL .Site.Params.favicon.icon) "" -}},
	"founders": [
		{{- range $i, $l := .Site.Params.person -}}
		{{- if gt $i 0 -}},{{- end -}}
		{
			"@type": "Person",
			"email" : {{ .email -}},
			"name" : {{ delimit (slice .name.given .name.family) " " -}},
			"givenName" : {{ .name.given -}},
			"familyName" : {{ .name.family }}
			{{ with .name.middle -}}, "additionalName" : {{ . -}}{{- end -}}
			{{ with .image }}, "image" : {{ . -}}{{- end }}
			{{- if .links }}
			, "sameAs" : [
				{{- range $n, $k := .links -}}
				{{- if gt $n 0 -}},{{- end }}
				{{ .url }}
				{{- end }}
			]
			{{- end }}
		}
		{{ end -}}
	]
},


{
	"@context": "http://schema.org",
	"@type": "WebSite",
	"name": {{ .Site.Title -}},
	"alternateName": {{ .Site.Params.name -}},
	"url": {{- partial "domainlink" (dict "content" .) }}
	{{ with .Site.Params.license }}, "license" : {{ . -}}{{- end }}
	{{ with .Site.Params.keywords -}}, "genre" : {{ . -}}, "keywords" : {{ . -}}{{- end }}
	, "author" : [
		{{- range $i, $l := .Site.Params.person -}}
		{{- if gt $i 0 -}},{{- end -}}
		{
			"@type": "Person",
			"email" : {{ .email -}},
			"name" : {{ delimit (slice .name.given .name.family) " " -}},
			"givenName" : {{ .name.given -}},
			"familyName" : {{ .name.family }}
			{{ with .name.middle -}}, "additionalName" : {{ . -}}{{- end -}}
			{{ with .image }}, "image" : {{ . -}}{{- end }}
			{{- if .links }}
			, "sameAs" : [
				{{- range $n, $k := .links -}}
				{{- if gt $n 0 -}},{{- end }}
				{{ .url }}
				{{- end }}
			]
			{{- end }}
		}
		{{ end -}}
	]
}


{{- if in .Params.jsonld "techarticle" }}
,{
	"@context" : "http://schema.org",
	"@type" : "TechArticle",
	"headline" : {{ .Title -}},
	"proficiencyLevel" : {{ if .Params.difficulty -}}{{- .Params.difficulty -}}{{- else -}}"Beginner"{{- end -}},
	"wordCount" : {{ .FuzzyWordCount }},
	"datePublished" : {{ if .Date.IsZero -}}{{- .Site.Params.nonexistingdate -}}{{- else -}}{{ .Date.Format "Mon, 02 Jan 2006 15:04:05 -0700" -}}{{- end }},
	"image" : {{ if .Params.image -}}{{ delimit (slice .Site.BaseURL .Params.image) "" -}}{{- else -}}{{- delimit (slice .Site.BaseURL .Site.Params.favicon.icon) "" -}}{{- end }} 
}
{{- end }}


{{- if isset .Site.Taxonomies .Section -}}
,{
	"@context" : "http://schema.org",
	"@type" : "BlogPosting",
	"headline" : {{ .Title -}},
	"articleBody" : {{ .Content | plainify | chomp -}},
	"wordCount" : {{ .FuzzyWordCount }},
	"datePublished" : {{ if .Date.IsZero -}}{{- .Site.Params.nonexistingdate -}}{{- else -}}{{ .Date.Format "Mon, 02 Jan 2006 15:04:05 -0700" -}}{{- end }},
	"dateModified" : {{ if .Lastmod.IsZero -}}{{- .Site.Params.nonexistingdate -}}{{- else -}}{{ .Lastmod.Format "Mon, 02 Jan 2006 15:04:05 -0700" -}}{{- end }},
	"image" : {{ if .Params.image -}}{{ delimit (slice .Site.BaseURL .Params.image) "" -}}{{- else -}}{{- delimit (slice .Site.BaseURL .Site.Params.favicon.icon) "" -}}{{- end }}, 
	"publisher" : {
			"@type": "Organization",	
			"name" : {{ .Site.Params.name -}},
			"email" : {{ .Site.Params.contact -}},
			"url" : {{ delimit (slice .Site.Params.domain.protocol .Site.Params.domain.name) "" -}}
	},
	"author" : {
			"@type": "Organization",	
			"name" : {{ .Site.Params.name -}},
			"email" : {{ .Site.Params.contact -}},
			"url" : {{ delimit (slice .Site.Params.domain.protocol .Site.Params.domain.name) "" -}}
	}
	{{ with .Params.categories -}}, "keywords" : {{ delimit (sort .) ", " -}}{{- end }}
}


{{- if .Params.relmedia -}}
,{
	"@context" : "http://schema.org",
	"@type" : "DigitalDocument",
	"about" : {{ .Title -}},
	"fileFormat" : {{ partialCached "domainlink" (dict "content" . "path" .Params.relmedia) -}},
	"url" : {{ partialCached "domainlink" (dict "content" . "path" .Params.relmedia) -}},
	"license" : {{ .Site.Params.license -}}
}
{{- end -}}
{{- end }}
]
</script>


